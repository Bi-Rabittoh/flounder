{{$domain := .Domain}}
{{$authUser := .AuthUser}}
{{template "header" .}}
<h1>Managing
  <a href="https://{{$authUser}}.{{$domain}}">
    {{.AuthUser}}.{{$domain}}
  </a>
</h1>
{{template "nav.html" .}}
<h3>Your files:</h3>
{{ range .Files }}
<div>
  <a href="https://{{$authUser}}.{{$domain}}/{{.Name}}">
      {{ .Name }}</a>
  <a href="/edit/{{.Name}}">edit</a>
  <form action="/delete/{{.Name}}" method="POST" class="inline">
    <input
      class="button"
      type="submit"
      onclick="return confirm('Are you sure you want to delete this file?');"
      value="delete"
    />
  </form>
</div>
{{ end }}
<h3>Create file by name:</h3>
<noscript>Create a new page by going to /edit/[filename]</noscript>
<input id="edit_new" size=32 placeholder="New filename, e.g. newfile.gmi" />
<a href="#" id="create_new">Edit new page</a><br>
<script>
  var input = document.getElementById('edit_new')
  var create = document.getElementById('create_new')
  create.href = '/edit/' + input.value
  input.onchange = input.onkeyup = function () {
    create.href = '/edit/' + input.value
  }
</script>
<br />
<form action="/upload" enctype="multipart/form-data" method="POST">
  <input type="file" id="myFile" name="file" multiple />
  <input type="submit" value="Upload file" class="button" />
</form>
{{template "footer" .}}
